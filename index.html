<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="MATInder">
<title>MATInder</title>


<!-- link do manifest.json -->
<link rel="manifest" href="manifest.json">
<!-- ikona dla iOS (możesz dodać swój plik) -->
<link rel="apple-touch-icon" href="images/icon-192.png">


<style>
/* Reset i podstawy */
html,body{height:100%;margin:0;padding:0;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:linear-gradient(180deg,#f8f9fb,#ffffff);-webkit-font-smoothing:antialiased}
#app{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding-top:20px;box-sizing:border-box}


/* Kontener kart */
.deck{position:relative;width:92vw;max-width:420px;height:64vh;max-height:760px;}
/* Styl kart */
.card {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  border-radius: 20px;
  box-shadow: 0 25px 45px rgba(0,0,0,0.2);
  overflow: hidden;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: #fff;
  touch-action: none;
  user-select: none;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 20px;
}

/* Overlay LIKE / NOPE */
.stamp {
  position: absolute;
  top: 20px;
  padding: 12px 18px;
  font-weight: 800;
  font-size: 22px;
  border: 4px solid;
  border-radius: 8px;
  opacity: 0;
  pointer-events: none;
  text-transform: uppercase;
  letter-spacing: 1px;
  transform: rotate(-20deg);
  background-color: rgba(255,255,255,0.8);
}

.stamp.like {
  left: 20px;
  border-color: #00c878;
  color: #00c878;
}

.stamp.nope {
  right: 20px;
  left: auto;
  border-color: #dc3c46;
  color: #dc3c46;
  transform: rotate(20deg);
}

.stamp.visible {
  opacity: 1;
}
.stamp {
  text-shadow: 2px 2px 4px rgba(0,0,0,0.25);
}

/* Informacje o profilu – gradient tło */
.info {
  width: 92vw;
  max-width: 420px;
  padding: 16px 20px;
  box-sizing: border-box;
  margin-top: 12px;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.8));
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.info .title {
  font-size: 22px;
  font-weight: 800;
  color: #222;
}

.info .desc {
  margin-top: 6px;
  color: #555;
  line-height: 1.4;
  font-size: 15px;
}


/* małe detale */
.controls{display:flex;gap:10px;margin-top:12px}
.btn{padding:10px 14px;border-radius:10px;background:#fff;box-shadow:0 6px 18px rgba(15,23,42,.06);font-weight:700}


/* animacje usuwania karty — przejścia */
.removed{transition:transform .35s ease-out,opacity .25s;opacity:0}


/* ułatwienia dla overlayu zależnego od przesunięcia */
.stamp.like.visible,.stamp.nope.visible{opacity:1}


/* Napisy informacyjne (małe) */
.small{font-size:12px;color:#666;margin-top:10px}


@media (min-width:700px){
body{background:linear-gradient(180deg,#f4f6f9,#fff)}
}
</style>
</head>
<body>
<div id="app">
<div style="width:92vw;max-width:420px;display:flex;justify-content:space-between;align-items:center;padding:0 0 6px 0;box-sizing:border-box;">
<h1 style="margin:0;font-size:18px">MATInder</h1>
<div style="font-size:12px;color:#666">Żartoborna wersja</div>
</div>


<div class="deck" id="deck"></div>


<div class="info" id="info">
<div class="controls">
  <button class="btn" id="nopeBtn">❌</button>
  <button class="btn" id="likeBtn">❤️</button>
</div>
<div class="title" id="name">—</div>
<div class="desc" id="desc">Wczytywanie...</div>
</div>




<div class="small">Dodaj do ekranu początkowego w Safari (Udostępnij → Dodaj do ekranu początkowego)</div>
</div>


<script>
// ---- Model profilu ----
class Profile {
constructor(name, age, desc, images){
this.name = name;
this.age = age;
this.desc = desc;
this.images = images; // tablica urli
this.currentImage = 0;
}
nextImage(){
if(this.images.length <= 1) return;
this.currentImage = (this.currentImage + 1) % this.images.length;
}
prevImage(){
if(this.images.length <= 1) return;
this.currentImage = (this.currentImage - 1 + this.images.length) % this.images.length;
}
currentImgUrl(){
return this.images[this.currentImage];
}
}
// ---- Zahardcodowane profile ----
const profiles = [
new Profile('Wiktor', 22, 'Opis 1', [
'https://picsum.photos/200/300',
'https://picsum.photos/200/300',
'https://picsum.photos/200/300'
]),
new Profile('Wiktor', 22, 'Opis 2', [
'https://picsum.photos/200/300',
'https://picsum.photos/200/300'
]),
new Profile('Wiktor ', 22, 'Ratuje rośliny przed suszą. W wolnym czasie koktajle.', [
'https://picsum.photos/200/300'
])
];

// ---- Elementy DOM ----
const deck = document.getElementById('deck');
const nameEl = document.getElementById('name');
const descEl = document.getElementById('desc');


// ---- Renderowanie stosu kart ----
function renderStack(){
deck.innerHTML = '';
// odwrotnie — ostatni profil na spodzie
for(let i = profiles.length -1; i >= 0; i--){
const p = profiles[i];
const card = createCard(p);
// lekkie przesuniecie dla lepszego efektu warstw
const offset = (profiles.length -1 - i) * 10; // większe przesunięcie
const scale = 1 - (profiles.length -1 - i) * 0.03; // lekka skala
card.style.transform = `translateY(${offset}px) scale(${scale})`;
deck.appendChild(card);
}
updateInfo();
}



function updateInfo(){
if(profiles.length === 0){
nameEl.textContent = 'Brak profili';
descEl.textContent = 'To już koniec — odśwież stronę, aby załadować ponownie.';
return;
}
const top = profiles[0];
nameEl.textContent = `${top.name}, ${top.age}`;
descEl.textContent = top.desc;
}

// ---- Tworzenie pojedynczej karty ----
function createCard(profile){
const el = document.createElement('div');
el.className = 'card';
el.innerHTML = `
<img src="${profile.currentImgUrl()}" alt="${profile.name}" draggable="false">
<div class="stamp like">LIKE</div>
<div class="stamp nope">NOPE</div>
`;


// zamiana zdjęcia po tapnięciu w lewą/prawą połowę
el.addEventListener('click', (ev) => {
// ignoruj jeśli był drag
if(el._isDragging) return;
const rect = el.getBoundingClientRect();
const x = ev.clientX - rect.left;
if(x > rect.width / 2){
profile.nextImage();
} else {
profile.prevImage();
}
const img = el.querySelector('img');
img.src = profile.currentImgUrl();
updateInfo();
});

// obsługa dotyku / przesunięć
let startX=0, startY=0, currentX=0, currentY=0, isPointerDown=false;


function onPointerDown(e){
isPointerDown = true;
el._isDragging = false;
startX = e.touches ? e.touches[0].clientX : e.clientX;
startY = e.touches ? e.touches[0].clientY : e.clientY;
el.style.transition = 'none';
}
function onPointerMove(e){
if(!isPointerDown) return;
const clientX = e.touches ? e.touches[0].clientX : e.clientX;
const clientY = e.touches ? e.touches[0].clientY : e.clientY;
currentX = clientX - startX;
currentY = clientY - startY;
if(Math.abs(currentX) > 5) el._isDragging = true;
const rot = currentX / 12;
el.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rot}deg)`;
// overlayy
const likeStamp = el.querySelector('.stamp.like');
const nopeStamp = el.querySelector('.stamp.nope');
if(currentX > 0){
likeStamp.classList.add('visible');
likeStamp.style.opacity = Math.min(1, Math.abs(currentX) / 120);
nopeStamp.classList.remove('visible');
} else if(currentX < 0){
nopeStamp.classList.add('visible');
nopeStamp.style.opacity = Math.min(1, Math.abs(currentX) / 120);
likeStamp.classList.remove('visible');
} else {
likeStamp.classList.remove('visible');
nopeStamp.classList.remove('visible');
}
}

function onPointerUp(e){
if(!isPointerDown) return;
isPointerDown = false;
el.style.transition = '';
const threshold = el.clientWidth * 0.28; // próg do akcji
if(Math.abs(currentX) > threshold){
// wykonaj akcję
const toRight = currentX > 0;
const endX = (toRight ? el.clientWidth * 1.4 : -el.clientWidth * 1.4);
el.style.transition = 'transform .45s cubic-bezier(.22,.9,.26,1), opacity .3s';
el.style.transform = `translate(${endX}px, ${currentY}px) rotate(${toRight?30:-30}deg)`;
el.classList.add('removed');
// małe opóźnienie, żeby animacja zdążyła
setTimeout(() => {
    // usuń profil z tablicy
    if (profiles[0] && profiles[0] === profile) {
        profiles.shift();
    } else {
        const idx = profiles.indexOf(profile);
        if (idx > -1) profiles.splice(idx, 1);
    }
    renderStack();
}, 300);

} else {
    // jeśli przesunięcie było za małe – wróć do pozycji startowej
    el.style.transform = '';
    const likeStamp = el.querySelector('.stamp.like');
    const nopeStamp = el.querySelector('.stamp.nope');
    likeStamp.classList.remove('visible');
    nopeStamp.classList.remove('visible');
}
currentX = 0;
currentY = 0;
}

// podpięcie eventów dotyku/myszy
el.addEventListener('mousedown', onPointerDown);
el.addEventListener('touchstart', onPointerDown);
el.addEventListener('mousemove', onPointerMove);
el.addEventListener('touchmove', onPointerMove);
el.addEventListener('mouseup', onPointerUp);
el.addEventListener('touchend', onPointerUp);

return el;
}

// ---- Inicjalizacja ----
renderStack();

document.getElementById('nopeBtn').addEventListener('click', () => {
  if(profiles.length === 0) return;
  const topCard = deck.firstChild;
  const event = new MouseEvent('mouseup', {clientX: 0});
  topCard.dispatchEvent(event);
});

document.getElementById('likeBtn').addEventListener('click', () => {
  if(profiles.length === 0) return;
  const topCard = deck.firstChild;
  const event = new MouseEvent('mouseup', {clientX: topCard.clientWidth + 1});
  topCard.dispatchEvent(event);
});
</script>
